(this["webpackJsonporcamentos-frontend"]=this["webpackJsonporcamentos-frontend"]||[]).push([[0],{24:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c.n(s),r=c(18),n=c.n(r),o=(c(24),c(9)),i=c(4),d=c(6),l=c(40),j=c(32),b=c(33),m=c(34),h=c(35),x=c(36),O=c(1);var u=()=>{const[e,t]=Object(s.useState)([]),[c,a]=Object(s.useState)(!1),[r,n]=Object(s.useState)(null),[o,i]=Object(s.useState)({nome:"",preco:"",descricao:""}),[u,p]=Object(s.useState)({show:!1,message:"",type:""});Object(s.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=await l.a.get("/api/produtos");t(e.data)}catch(e){v("Erro ao carregar produtos","danger")}},v=(e,t)=>{p({show:!0,message:e,type:t}),setTimeout(()=>p({show:!1,message:"",type:""}),3e3)},y=()=>{n(null),i({nome:"",preco:"",descricao:""}),a(!0)},N=()=>{a(!1),n(null),i({nome:"",preco:"",descricao:""})};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[Object(O.jsx)("h1",{children:"Gerenciar Produtos"}),Object(O.jsxs)("button",{className:"btn btn-primary",onClick:y,children:[Object(O.jsx)(j.a,{size:16}),"Novo Produto"]})]}),u.show&&Object(O.jsx)("div",{className:"alert alert-".concat(u.type),children:u.message}),Object(O.jsxs)("div",{className:"card",children:[Object(O.jsxs)("table",{className:"table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Nome"}),Object(O.jsx)("th",{children:"Pre\xe7o"}),Object(O.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(O.jsx)("th",{children:"Data de Cria\xe7\xe3o"}),Object(O.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(O.jsx)("tbody",{children:e.map(e=>Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.nome}),Object(O.jsxs)("td",{children:["R$ ",e.preco.toFixed(2)]}),Object(O.jsx)("td",{children:e.descricao}),Object(O.jsx)("td",{children:new Date(e.dataCriacao).toLocaleDateString("pt-BR")}),Object(O.jsx)("td",{children:Object(O.jsxs)("div",{className:"flex gap-2",children:[Object(O.jsx)("button",{className:"btn btn-primary",onClick:()=>(e=>{n(e),i({nome:e.nome,preco:e.preco.toString(),descricao:e.descricao}),a(!0)})(e),style:{padding:"5px 10px",fontSize:"12px"},children:Object(O.jsx)(b.a,{size:14})}),Object(O.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja excluir este produto?"))try{await l.a.delete("/api/produtos/".concat(e)),v("Produto exclu\xeddo com sucesso!","success"),g()}catch(t){v("Erro ao excluir produto","danger")}})(e.id),style:{padding:"5px 10px",fontSize:"12px"},children:Object(O.jsx)(m.a,{size:14})})]})})]},e.id))})]}),0===e.length&&Object(O.jsxs)("div",{className:"text-center",style:{padding:"40px"},children:[Object(O.jsx)("p",{children:"Nenhum produto cadastrado ainda."}),Object(O.jsx)("button",{className:"btn btn-primary mt-4",onClick:y,children:"Cadastrar Primeiro Produto"})]})]}),c&&Object(O.jsx)("div",{className:"modal",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("h2",{className:"modal-title",children:r?"Editar Produto":"Novo Produto"}),Object(O.jsx)("button",{className:"close",onClick:N,children:Object(O.jsx)(h.a,{size:24})})]}),Object(O.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{r?(await l.a.put("/api/produtos/".concat(r.id),o),v("Produto atualizado com sucesso!","success")):(await l.a.post("/api/produtos",o),v("Produto cadastrado com sucesso!","success")),a(!1),n(null),i({nome:"",preco:"",descricao:""}),g()}catch(t){v("Erro ao salvar produto","danger")}},children:[Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"nome",children:"Nome *"}),Object(O.jsx)("input",{type:"text",id:"nome",className:"form-control",value:o.nome,onChange:e=>i(Object(d.a)(Object(d.a)({},o),{},{nome:e.target.value})),required:!0})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"preco",children:"Pre\xe7o *"}),Object(O.jsx)("input",{type:"number",id:"preco",className:"form-control",value:o.preco,onChange:e=>i(Object(d.a)(Object(d.a)({},o),{},{preco:e.target.value})),step:"0.01",min:"0",required:!0})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"descricao",children:"Descri\xe7\xe3o"}),Object(O.jsx)("textarea",{id:"descricao",className:"form-control",value:o.descricao,onChange:e=>i(Object(d.a)(Object(d.a)({},o),{},{descricao:e.target.value})),rows:"3"})]}),Object(O.jsxs)("div",{className:"flex gap-2 justify-between",children:[Object(O.jsx)("button",{type:"button",className:"btn",onClick:N,children:"Cancelar"}),Object(O.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[Object(O.jsx)(x.a,{size:16}),r?"Atualizar":"Cadastrar"]})]})]})]})})]})},p=c(37),g=c(38);var v=()=>{const[e,t]=Object(s.useState)([]),[c,a]=Object(s.useState)(null),[r,n]=Object(s.useState)(!1),[o,i]=Object(s.useState)({show:!1,message:"",type:""});Object(s.useEffect)(()=>{d()},[]);const d=async()=>{try{const e=await l.a.get("/api/orcamentos");t(e.data)}catch(e){j("Erro ao carregar or\xe7amentos","danger")}},j=(e,t)=>{i({show:!0,message:e,type:t}),setTimeout(()=>i({show:!1,message:"",type:""}),3e3)},b=()=>{n(!1),a(null)},h=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),x=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"flex justify-between items-center mb-4",children:Object(O.jsx)("h1",{children:"Or\xe7amentos"})}),o.show&&Object(O.jsx)("div",{className:"alert alert-".concat(o.type),children:o.message}),Object(O.jsxs)("div",{className:"card",children:[Object(O.jsxs)("table",{className:"table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Cliente"}),Object(O.jsx)("th",{children:"Total"}),Object(O.jsx)("th",{children:"Itens"}),Object(O.jsx)("th",{children:"Data de Cria\xe7\xe3o"}),Object(O.jsx)("th",{children:"A\xe7\xf5es"})]})}),Object(O.jsx)("tbody",{children:e.map(e=>Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.cliente}),Object(O.jsx)("td",{children:h(e.total)}),Object(O.jsxs)("td",{children:[e.itens.length," item(s)"]}),Object(O.jsx)("td",{children:x(e.dataCriacao)}),Object(O.jsx)("td",{children:Object(O.jsxs)("div",{className:"flex gap-2",children:[Object(O.jsx)("button",{className:"btn btn-primary",onClick:()=>(async e=>{try{const t=await l.a.get("/api/orcamentos/".concat(e));a(t.data),n(!0)}catch(t){j("Erro ao carregar detalhes do or\xe7amento","danger")}})(e.id),style:{padding:"5px 10px",fontSize:"12px"},children:Object(O.jsx)(p.a,{size:14})}),Object(O.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja excluir este or\xe7amento?"))try{await l.a.delete("/api/orcamentos/".concat(e)),j("Or\xe7amento exclu\xeddo com sucesso!","success"),d()}catch(t){j("Erro ao excluir or\xe7amento","danger")}})(e.id),style:{padding:"5px 10px",fontSize:"12px"},children:Object(O.jsx)(m.a,{size:14})})]})})]},e.id))})]}),0===e.length&&Object(O.jsxs)("div",{className:"text-center",style:{padding:"40px"},children:[Object(O.jsx)(g.a,{size:48,style:{color:"#ccc",marginBottom:"16px"}}),Object(O.jsx)("p",{children:"Nenhum or\xe7amento criado ainda."}),Object(O.jsx)("p",{style:{color:"#666",fontSize:"14px"},children:'Crie seu primeiro or\xe7amento na se\xe7\xe3o "Novo Or\xe7amento"'})]})]}),r&&c&&Object(O.jsx)("div",{className:"modal",children:Object(O.jsxs)("div",{className:"modal-content",style:{maxWidth:"800px"},children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsxs)("h2",{className:"modal-title",children:[Object(O.jsx)(g.a,{size:20,style:{marginRight:"8px"}}),"Or\xe7amento - ",c.cliente]}),Object(O.jsx)("button",{className:"close",onClick:b,children:"\u2715"})]}),Object(O.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:"Cliente:"})," ",c.cliente]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:"Data:"})," ",x(c.dataCriacao)]}),c.observacoes&&Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:"Observa\xe7\xf5es:"})," ",c.observacoes]})]}),Object(O.jsxs)("div",{className:"card",style:{marginBottom:"20px"},children:[Object(O.jsx)("h3",{style:{marginBottom:"15px"},children:"Itens do Or\xe7amento"}),Object(O.jsxs)("table",{className:"table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Produto"}),Object(O.jsx)("th",{children:"Quantidade"}),Object(O.jsx)("th",{children:"Pre\xe7o Unit."}),Object(O.jsx)("th",{children:"Subtotal"})]})}),Object(O.jsx)("tbody",{children:c.itens.map(e=>Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.nome}),Object(O.jsx)("td",{children:e.quantidade}),Object(O.jsx)("td",{children:h(e.preco)}),Object(O.jsx)("td",{children:h(e.subtotal)})]},e.id))})]})]}),Object(O.jsx)("div",{className:"total-section",children:Object(O.jsxs)("h3",{children:["Total: ",h(c.total)]})}),Object(O.jsx)("div",{className:"text-right",children:Object(O.jsx)("button",{className:"btn",onClick:b,children:"Fechar"})})]})})]})},y=c(39);var N=()=>{const[e,t]=Object(s.useState)([]),[c,a]=Object(s.useState)({cliente:"",observacoes:""}),[r,n]=Object(s.useState)([]),[o,i]=Object(s.useState)({show:!1,message:"",type:""});Object(s.useEffect)(()=>{b()},[]);const b=async()=>{try{const e=await l.a.get("/api/produtos");t(e.data)}catch(e){h("Erro ao carregar produtos","danger")}},h=(e,t)=>{i({show:!0,message:e,type:t}),setTimeout(()=>i({show:!1,message:"",type:""}),3e3)},u=(t,c,s)=>{const a=[...r];if(a[t]=Object(d.a)(Object(d.a)({},a[t]),{},{[c]:s}),"produtoId"===c){const c=e.find(e=>e.id===s);c&&(a[t].nome=c.nome,a[t].preco=c.preco,a[t].subtotal=c.preco*a[t].quantidade)}"quantidade"===c&&(a[t].quantidade=parseInt(s)||0,a[t].subtotal=a[t].preco*a[t].quantidade),n(a)},p=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"flex justify-between items-center mb-4",children:Object(O.jsx)("h1",{children:"Novo Or\xe7amento"})}),o.show&&Object(O.jsx)("div",{className:"alert alert-".concat(o.type),children:o.message}),Object(O.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c.cliente.trim())return void h("Nome do cliente \xe9 obrigat\xf3rio","danger");if(0===r.length)return void h("Adicione pelo menos um item ao or\xe7amento","danger");if(r.filter(e=>!e.produtoId).length>0)h("Todos os itens devem ter um produto selecionado","danger");else try{const e={cliente:c.cliente,observacoes:c.observacoes,itens:r.map(e=>({produtoId:e.produtoId,nome:e.nome,quantidade:e.quantidade,preco:e.preco}))};await l.a.post("/api/orcamentos",e),h("Or\xe7amento criado com sucesso!","success"),a({cliente:"",observacoes:""}),n([])}catch(t){h("Erro ao criar or\xe7amento","danger")}},children:[Object(O.jsxs)("div",{className:"card mb-4",children:[Object(O.jsxs)("h2",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[Object(O.jsx)(y.a,{size:20}),"Informa\xe7\xf5es do Cliente"]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"cliente",children:"Nome do Cliente *"}),Object(O.jsx)("input",{type:"text",id:"cliente",className:"form-control",value:c.cliente,onChange:e=>a(Object(d.a)(Object(d.a)({},c),{},{cliente:e.target.value})),required:!0})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"observacoes",children:"Observa\xe7\xf5es"}),Object(O.jsx)("textarea",{id:"observacoes",className:"form-control",value:c.observacoes,onChange:e=>a(Object(d.a)(Object(d.a)({},c),{},{observacoes:e.target.value})),rows:"3",placeholder:"Observa\xe7\xf5es adicionais sobre o or\xe7amento..."})]})]}),Object(O.jsxs)("div",{className:"card mb-4",children:[Object(O.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[Object(O.jsxs)("h2",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Object(O.jsx)(g.a,{size:20}),"Itens do Or\xe7amento"]}),Object(O.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(0===e.length)return void h("Cadastre produtos primeiro antes de criar um or\xe7amento","danger");const t={id:Date.now(),produtoId:"",nome:"",quantidade:1,preco:0,subtotal:0};n([...r,t])},children:[Object(O.jsx)(j.a,{size:16}),"Adicionar Item"]})]}),0===r.length&&Object(O.jsxs)("div",{className:"text-center",style:{padding:"40px",color:"#666"},children:[Object(O.jsx)(g.a,{size:48,style:{color:"#ccc",marginBottom:"16px"}}),Object(O.jsx)("p",{children:"Nenhum item adicionado ainda."}),Object(O.jsx)("p",{children:'Clique em "Adicionar Item" para come\xe7ar.'})]}),r.map((t,c)=>Object(O.jsxs)("div",{className:"item-row",children:[Object(O.jsxs)("select",{className:"form-control",value:t.produtoId,onChange:e=>u(c,"produtoId",e.target.value),required:!0,children:[Object(O.jsx)("option",{value:"",children:"Selecione um produto"}),e.map(e=>Object(O.jsxs)("option",{value:e.id,children:[e.nome," - ",p(e.preco)]},e.id))]}),Object(O.jsx)("input",{type:"number",className:"form-control",placeholder:"Qtd",value:t.quantidade,onChange:e=>u(c,"quantidade",e.target.value),min:"1",style:{width:"80px"},required:!0}),Object(O.jsx)("input",{type:"text",className:"form-control",value:p(t.preco),readOnly:!0,style:{width:"120px"}}),Object(O.jsx)("input",{type:"text",className:"form-control",value:p(t.subtotal),readOnly:!0,style:{width:"120px"}}),Object(O.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>(e=>{const t=r.filter((t,c)=>c!==e);n(t)})(c),style:{padding:"8px 12px"},children:Object(O.jsx)(m.a,{size:16})})]},t.id)),r.length>0&&Object(O.jsx)("div",{className:"total-section",children:Object(O.jsxs)("h3",{children:["Total: ",p(r.reduce((e,t)=>e+t.subtotal,0))]})})]}),Object(O.jsx)("div",{className:"text-right",children:Object(O.jsxs)("button",{type:"submit",className:"btn btn-success",disabled:0===r.length,children:[Object(O.jsx)(x.a,{size:16}),"Criar Or\xe7amento"]})})]})]})};c(30);var f=function(){return Object(O.jsx)(o.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("nav",{className:"navbar",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"flex justify-between items-center",children:[Object(O.jsx)(o.b,{to:"/",className:"navbar-brand",children:"Sistema de Or\xe7amentos"}),Object(O.jsxs)("ul",{className:"navbar-nav",children:[Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"/produtos",children:"Produtos"})}),Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"/orcamentos",children:"Or\xe7amentos"})}),Object(O.jsx)("li",{children:Object(O.jsx)(o.b,{to:"/novo-orcamento",children:"Novo Or\xe7amento"})})]})]})})}),Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{path:"/",element:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("h1",{children:"Bem-vindo ao Sistema de Or\xe7amentos"}),Object(O.jsx)("p",{children:"Use o menu acima para navegar pelas funcionalidades:"}),Object(O.jsxs)("ul",{style:{marginTop:"20px",marginLeft:"20px"},children:[Object(O.jsxs)("li",{children:[Object(O.jsx)("strong",{children:"Produtos:"})," Cadastre e gerencie seus produtos"]}),Object(O.jsxs)("li",{children:[Object(O.jsx)("strong",{children:"Or\xe7amentos:"})," Visualize todos os or\xe7amentos criados"]}),Object(O.jsxs)("li",{children:[Object(O.jsx)("strong",{children:"Novo Or\xe7amento:"})," Crie um novo or\xe7amento para um cliente"]})]})]})}),Object(O.jsx)(i.a,{path:"/produtos",element:Object(O.jsx)(u,{})}),Object(O.jsx)(i.a,{path:"/orcamentos",element:Object(O.jsx)(v,{})}),Object(O.jsx)(i.a,{path:"/novo-orcamento",element:Object(O.jsx)(N,{})})]})})]})})};n.a.createRoot(document.getElementById("root")).render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(f,{})}))}},[[31,1,2]]]);
//# sourceMappingURL=main.5bab3a75.chunk.js.map